<Window x:Class="VoiceLite.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="VoiceLite Settings" Height="640" Width="560"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{StaticResource PrimaryBackgroundBrush}">

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- Header -->
            <RowDefinition Height="*"/>      <!-- Settings Content -->
            <RowDefinition Height="Auto"/>   <!-- Action Buttons -->
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0"
                   Text="Settings"
                   Style="{StaticResource TitleTextStyle}"
                   Margin="0,0,0,24"/>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="1"
                      VerticalScrollBarVisibility="Auto"
                      Margin="0,0,0,20">
            <StackPanel Spacing="20">

                <!-- Input Settings Section -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Input Settings"
                                   Style="{StaticResource SubtitleTextStyle}"/>

                        <!-- Hotkey Configuration -->
                        <Grid Margin="0,12,0,16">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       Text="Record Hotkey"
                                       Style="{StaticResource BodyTextStyle}"
                                       Margin="0,0,0,8"/>

                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBox Name="HotkeyTextBox"
                                         Grid.Column="0"
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         IsReadOnly="True"
                                         Text="F1"
                                         PreviewKeyDown="HotkeyTextBox_PreviewKeyDown"
                                         GotFocus="HotkeyTextBox_GotFocus"
                                         LostFocus="HotkeyTextBox_LostFocus"/>

                                <Button Name="ClearHotkeyButton"
                                        Grid.Column="1"
                                        Content="Clear"
                                        Style="{StaticResource SecondaryButtonStyle}"
                                        Width="70"
                                        Margin="8,0,0,0"
                                        Click="ClearHotkeyButton_Click"/>
                            </Grid>

                            <TextBlock Name="HotkeyInstructionText"
                                       Grid.Row="2"
                                       Text="Click the text box and press your desired key combination"
                                       Style="{StaticResource CaptionTextStyle}"
                                       Margin="0,8,0,0"
                                       Visibility="Collapsed"/>
                        </Grid>

                        <!-- Recording Mode -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="Recording Mode"
                                       Style="{StaticResource BodyTextStyle}"
                                       Margin="0,0,0,8"/>
                            <RadioButton Name="PushToTalkRadio"
                                         Content="Push-to-Talk (Hold key to record)"
                                         Style="{StaticResource ModernCheckBoxStyle}"
                                         IsChecked="True"
                                         Margin="0,4"/>
                            <RadioButton Name="ToggleRadio"
                                         Content="Toggle (Press once to start, again to stop)"
                                         Style="{StaticResource ModernCheckBoxStyle}"
                                         IsEnabled="False"
                                         Margin="0,4"/>
                        </StackPanel>

                        <!-- Microphone Selection -->
                        <StackPanel>
                            <TextBlock Text="Microphone"
                                       Style="{StaticResource BodyTextStyle}"
                                       Margin="0,0,0,8"/>
                            <ComboBox Name="MicrophoneComboBox"
                                      DisplayMemberPath="Name"
                                      Margin="0,0,0,12"/>
                            <Button Name="RefreshMicrophonesButton"
                                    Content="Refresh Microphones"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Width="160"
                                    HorizontalAlignment="Left"
                                    Click="RefreshMicrophonesButton_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Audio Settings Section -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Audio Settings"
                                   Style="{StaticResource SubtitleTextStyle}"/>

                        <!-- Audio Feedback -->
                        <CheckBox Name="PlaySoundFeedbackCheckBox"
                                  Content="Play sound feedback (beep on record start/stop)"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  Margin="0,12,0,8"/>

                        <CheckBox Name="AutoPasteCheckBox"
                                  Content="Auto-paste transcribed text (Ctrl+V)"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  IsChecked="True"
                                  Margin="0,4,0,16"
                                  ToolTip="When enabled, transcribed text will automatically paste into the active application. When disabled, text is only copied to clipboard."/>

                        <!-- Audio Enhancement Options -->
                        <TextBlock Text="Audio Enhancements"
                                   Style="{StaticResource BodyTextStyle}"
                                   FontWeight="Medium"
                                   Margin="0,8,0,8"/>

                        <CheckBox Name="NoiseSuppressionCheckBox"
                                  Content="Enable noise suppression"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  Margin="0,4"/>

                        <CheckBox Name="AutoGainCheckBox"
                                  Content="Enable automatic gain control"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  Margin="0,4,0,12"/>

                        <!-- Audio Parameters -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,12,0">
                                <TextBlock Text="Target RMS"
                                           Style="{StaticResource CaptionTextStyle}"/>
                                <TextBox Name="TargetRmsTextBox"
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         Height="32"
                                         Margin="0,4,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                <TextBlock Text="Noise Gate Threshold"
                                           Style="{StaticResource CaptionTextStyle}"/>
                                <TextBox Name="NoiseThresholdTextBox"
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         Height="32"
                                         Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Whisper Engine Settings -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Whisper Engine"
                                   Style="{StaticResource SubtitleTextStyle}"/>

                        <!-- Model Selection -->
                        <StackPanel Margin="0,12,0,16">
                            <TextBlock Text="Model"
                                       Style="{StaticResource BodyTextStyle}"
                                       Margin="0,0,0,8"/>
                            <ComboBox Name="WhisperModelComboBox"
                                      IsEditable="True"/>
                        </StackPanel>

                        <!-- Engine Parameters -->
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0" Margin="0,0,8,0">
                                <TextBlock Text="Beam Size"
                                           Style="{StaticResource CaptionTextStyle}"/>
                                <TextBox Name="BeamSizeTextBox"
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         Height="32"
                                         Margin="0,4,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="1" Margin="8,0">
                                <TextBlock Text="Best Of"
                                           Style="{StaticResource CaptionTextStyle}"/>
                                <TextBox Name="BestOfTextBox"
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         Height="32"
                                         Margin="0,4,0,0"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2" Margin="8,0,0,0">
                                <TextBlock Text="Timeout Multiplier"
                                           Style="{StaticResource CaptionTextStyle}"/>
                                <TextBox Name="TimeoutMultiplierTextBox"
                                         Style="{StaticResource ModernTextBoxStyle}"
                                         Height="32"
                                         Margin="0,4,0,0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Application Behavior -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="Application Behavior"
                                   Style="{StaticResource SubtitleTextStyle}"/>

                        <CheckBox Name="StartWithWindowsCheckBox"
                                  Content="Start with Windows"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  IsEnabled="False"
                                  Margin="0,12,0,4"/>

                        <CheckBox Name="MinimizeToTrayCheckBox"
                                  Content="Minimize to system tray on close"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  IsChecked="True"
                                  Margin="0,4"/>

                        <CheckBox Name="ShowTrayIconCheckBox"
                                  Content="Show system tray icon"
                                  Style="{StaticResource ModernCheckBoxStyle}"
                                  IsChecked="True"
                                  IsEnabled="False"
                                  Margin="0,4"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Spacing="8">
            <Button Name="SaveButton"
                    Content="Save"
                    Style="{StaticResource ModernButtonStyle}"
                    Width="90"
                    Click="SaveButton_Click"
                    IsDefault="True"/>
            <Button Name="CancelButton"
                    Content="Cancel"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Width="90"
                    Click="CancelButton_Click"
                    IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>