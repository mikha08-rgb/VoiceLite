<Window x:Class="VoiceLite.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:VoiceLite.Utilities"
        Title="VoiceLite" Height="500" Width="620"
        Icon="VoiceLite.ico"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="True"
        StateChanged="Window_StateChanged"
        Background="#FCFCFC">

    <!-- Value Converters -->
    <Window.Resources>
        <local:RelativeTimeConverter x:Key="RelativeTimeConverter"/>
        <local:TruncateTextConverter x:Key="TruncateTextConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>   <!-- Title bar -->
            <RowDefinition Height="Auto"/>   <!-- Config info -->
            <RowDefinition Height="*"/>      <!-- History panel (fills ALL space) -->
            <RowDefinition Height="Auto"/>   <!-- Buttons -->
        </Grid.RowDefinitions>

        <!-- Title bar with status -->
        <Grid Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="VoiceLite"
                       FontSize="20" FontWeight="SemiBold"
                       Foreground="#4A4A4A"
                       HorizontalAlignment="Left"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                <Ellipse x:Name="StatusIndicator" Width="6" Height="6" Fill="#C8E6C9" Margin="0,0,6,0"/>
                <TextBlock x:Name="StatusText" Text="Ready"
                          Foreground="#7A7A7A" FontWeight="Normal" FontSize="14"/>
            </StackPanel>
        </Grid>

        <!-- Configuration information -->
        <StackPanel Grid.Row="1" Orientation="Vertical" HorizontalAlignment="Left" Margin="0,0,0,16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="24"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="24"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Hotkey: " Foreground="#7A7A7A" FontSize="14"/>
                    <TextBlock x:Name="HotkeyText" Text="F1" Foreground="#4A4A4A" FontWeight="SemiBold" FontSize="14"/>
                </StackPanel>
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <TextBlock Text="Microphone: " Foreground="#7A7A7A" FontSize="14"/>
                    <TextBlock x:Name="MicrophoneText" Text="Default" Foreground="#4A4A4A" FontWeight="SemiBold" FontSize="14"/>
                </StackPanel>
                <StackPanel Grid.Column="4" Orientation="Horizontal">
                    <TextBlock Text="Model: " Foreground="#7A7A7A" FontSize="14"/>
                    <TextBlock x:Name="ModelText" Text="Tiny (Free)" Foreground="#4A4A4A" FontWeight="SemiBold" FontSize="14"/>
                </StackPanel>
            </Grid>
            <TextBlock x:Name="AccountStatusText"
                       Text="Not signed in"
                       Foreground="#7A7A7A"
                       FontWeight="Normal"
                       FontSize="12"
                       Margin="0,12,0,0"/>
        </StackPanel>

        <!-- HISTORY PANEL (replaces transcription box - fills all remaining space) -->
        <Border Grid.Row="2"
                BorderBrush="#E0E0E0"
                BorderThickness="1"
                Background="White"
                CornerRadius="6"
                Margin="0,0,0,16">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Compact header -->
                    <RowDefinition Height="*"/>    <!-- Scrollable list -->
                </Grid.RowDefinitions>

                <!-- Compact Header (single line) -->
                <Border Grid.Row="0"
                        Background="#FAFAFA"
                        BorderBrush="#E0E0E0"
                        BorderThickness="0,0,0,1"
                        Padding="16,12">
                    <Grid>
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <TextBlock Text="Recent Transcriptions"
                                       FontWeight="SemiBold"
                                       FontSize="14"
                                       Foreground="#4A4A4A"
                                       VerticalAlignment="Center"/>
                            <TextBlock x:Name="HistoryCountText"
                                       Text="• 0 items"
                                       FontSize="12"
                                       Foreground="#B0B0B0"
                                       Margin="8,0,0,0"
                                       VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Compact action buttons (ghost style) -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button x:Name="ClearHistoryButton"
                                    Content="Clear"
                                    Height="28"
                                    Padding="12,0"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    BorderThickness="0"
                                    Foreground="#7A7A7A"
                                    FontSize="12"
                                    Cursor="Hand"
                                    Click="ClearHistory_Click"
                                    ToolTip="Clear all unpinned items"
                                    Margin="0,0,4,0"/>
                            <Button x:Name="ClearAllHistoryButton"
                                    Content="Clear All"
                                    Height="28"
                                    Padding="12,0"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    BorderThickness="0"
                                    Foreground="#E74C3C"
                                    FontSize="12"
                                    Cursor="Hand"
                                    Click="ClearAllHistory_Click"
                                    ToolTip="Delete all items including pinned"
                                    Margin="0,0,8,0"/>
                            <Button x:Name="ExportHistoryButton"
                                    Content="Export"
                                    Height="28"
                                    Padding="12,0"
                                    Background="Transparent"
                                    BorderBrush="Transparent"
                                    BorderThickness="0"
                                    Foreground="#7A7A7A"
                                    FontSize="12"
                                    Cursor="Hand"
                                    Click="ExportHistory_Click"
                                    ToolTip="Export history to text file"/>
                        </StackPanel>
                    </Grid>
                </Border>

                <!-- Scrollable History List -->
                <ScrollViewer Grid.Row="1"
                              VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Disabled"
                              Padding="12,10,12,10">
                    <StackPanel x:Name="HistoryItemsPanel">
                        <!-- History items added programmatically -->

                        <!-- Empty state -->
                        <TextBlock x:Name="EmptyHistoryMessage"
                                   Text="No transcriptions yet.&#x0a;&#x0a;Press your hotkey to start recording!"
                                   TextAlignment="Center"
                                   Foreground="#B0B0B0"
                                   FontSize="14"
                                   Margin="20,40,20,20"
                                   TextWrapping="Wrap"
                                   LineHeight="22"
                                   Visibility="Visible"/>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Buttons -->
        <Grid Grid.Row="3">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Stretch">
                <Button x:Name="TestButton"
                        Content="Test Recording"
                        Height="36"
                        Background="#F5F5F5"
                        Foreground="#4A4A4A"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        FontWeight="Normal"
                        FontSize="13"
                        Cursor="Hand"
                        Click="TestButton_Click"
                        Margin="0,0,8,0"
                        Padding="14,0"
                        ToolTip="Click or press LeftShift to test"/>

                <Button x:Name="DictionaryButton"
                        Content="📝 Dictionary"
                        Height="36"
                        Background="#F5F5F5"
                        Foreground="#4A4A4A"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        FontWeight="Normal"
                        FontSize="13"
                        Cursor="Hand"
                        Click="DictionaryButton_Click"
                        Margin="0,0,8,0"
                        Padding="12,0"
                        ToolTip="Manage custom word replacements"/>

                <Button x:Name="SettingsButton"
                        Content="Settings"
                        Height="36"
                        Background="#F5F5F5"
                        Foreground="#4A4A4A"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        FontWeight="Normal"
                        FontSize="13"
                        Cursor="Hand"
                        Click="SettingsButton_Click"
                        Margin="0,0,8,0"
                        Padding="14,0"/>

                <Button x:Name="AccountButton"
                        Content="Account"
                        Height="36"
                        Background="#F5F5F5"
                        Foreground="#4A4A4A"
                        BorderBrush="#E0E0E0"
                        BorderThickness="1"
                        FontWeight="Normal"
                        FontSize="13"
                        Cursor="Hand"
                        Click="AccountButton_Click"
                        Padding="14,0"/>
            </StackPanel>

            <CheckBox Grid.Row="1"
                     x:Name="MinimizeCheckBox"
                     Content="Minimize to system tray on close"
                     Foreground="#7A7A7A"
                     FontSize="12"
                     IsChecked="True"
                     HorizontalAlignment="Left"
                     Margin="0,16,0,0"/>
        </Grid>

        <!-- Hidden transcription text box for backward compatibility -->
        <TextBox x:Name="TranscriptionText"
                 Grid.Row="2"
                 Visibility="Collapsed"
                 Text="Ready to transcribe"/>
    </Grid>
</Window>
