This patch file integrates SimpleTelemetry into MainWindow.xaml.cs.
Apply once all other changes are complete.

==================== CHANGE 1: Add telemetry field ====================
Location: After line 38 (after recordingCoordinator field)

ADD THIS LINE:
        private SimpleTelemetry? telemetry; // Production telemetry for performance/reliability/usage tracking


==================== CHANGE 2: Initialize telemetry ====================
Location: In MainWindow_Loaded method, after analyticsService initialization

ADD THESE LINES:
            // Initialize production telemetry (privacy-first, opt-in)
            telemetry = new SimpleTelemetry(settings);
            telemetry.TrackAppStart();
            telemetry.TrackDailyActiveUser();


==================== CHANGE 3: Track hotkey response ====================
Location: In OnHotkeyPressed method, at the very start

ADD THIS LINE:
            telemetry?.TrackHotkeyResponseStart();

Location: In OnHotkeyPressed method, right after audioRecorder.StartRecording()

ADD THIS LINE:
            telemetry?.TrackHotkeyResponseEnd();


==================== CHANGE 4: Track transcription duration ====================
Location: In OnTranscriptionCompleted method, after successful transcription

ADD THESE LINES:
            // Track transcription performance
            if (result != null && !string.IsNullOrWhiteSpace(result.Text))
            {
                var durationMs = (DateTime.UtcNow - recordingStartTime).TotalMilliseconds;
                var wordCount = result.Text.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries).Length;
                telemetry?.TrackTranscriptionDuration((long)durationMs, settings.WhisperModel, wordCount, success: true);
                telemetry?.TrackFeatureAttempt("transcription", success: true);
            }


==================== CHANGE 5: Track errors ====================
Location: In catch blocks where ErrorLogger.LogError is called

ADD THIS LINE (after each ErrorLogger.LogError call):
            telemetry?.TrackError(ex.GetType().Name, component: "MainWindow", isCrash: false);


==================== CHANGE 6: Track session end ====================
Location: In MainWindow_Closing method, BEFORE disposing other services

ADD THESE LINES:
            // Track session metrics and upload final batch
            telemetry?.TrackSessionEnd();
            telemetry?.Dispose();


==================== VERIFICATION ====================
After applying changes:
1. Build solution (should compile with 0 errors)
2. Run app and check: %LOCALAPPDATA%/VoiceLite/telemetry/
3. Should see daily JSON files with metrics
4. Wait 10 minutes, check network traffic for POST to /api/metrics/upload
